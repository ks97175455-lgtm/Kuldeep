<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>E-Commerce Cart with Theming & Storage</title>

<style>

/* ===========================================================
   THEME VARIABLES (Inspired by SCSS variables)
=========================================================== */
:root {
    --bg: #f4f7fb;
    --text: #222;
    --card: #ffffff;
    --accent: #007bff;
    --radius: 16px;
    --shadow: 0px 10px 25px rgba(0,0,0,0.1);
}

.dark {
    --bg: #121212;
    --text: #e9e9e9;
    --card: #1f1f1f;
    --accent: #ffbb55;
}

/* ===========================================================
   GLOBAL STYLES + ANIMATION MIXINS (converted from SCSS)
=========================================================== */
* { box-sizing: border-box; }

body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    font-family: "Poppins", sans-serif;
    transition: 0.4s;
}

h2 {
    margin: 10px 0;
}

.container {
    width: 90%;
    margin: auto;
    padding: 20px;
}

/* Button Mixin Simulation */
.btn {
    padding: 10px 16px;
    background: var(--accent);
    color: white;
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
    transition: 0.3s;
    font-weight: 600;
}
.btn:hover {
    transform: scale(1.05);
}

/* ===========================================================
   PRODUCT GRID
=========================================================== */
.products {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 20px;
}

/* Card Style */
.card {
    background: var(--card);
    padding: 16px;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    animation: fadeIn 0.6s ease;
    transition: 0.3s;
}
.card:hover {
    transform: translateY(-5px);
}

.card img {
    width: 100%;
    height: 170px;
    object-fit: cover;
    border-radius: var(--radius);
}

/* ===========================================================
   CART PANEL
=========================================================== */
.cart {
    margin-top: 30px;
    background: var(--card);
    padding: 20px;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
}

.cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid rgba(100,100,100,0.2);
    animation: fadeInUp 0.4s ease;
}

.cart-item:last-child {
    border-bottom: none;
}

/* ===========================================================
   THEME SWITCHER
=========================================================== */
#themeToggle {
    position: fixed;
    right: 20px;
    top: 20px;
    padding: 10px 16px;
    background: var(--accent);
    color: white;
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
}

/* ===========================================================
   ANIMATIONS
=========================================================== */
@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}

@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

@media (max-width:600px){
    .products { grid-template-columns: 1fr; }
}

</style>
</head>
<body>

<button id="themeToggle">Toggle Theme</button>

<div class="container">
    <h1>üõçÔ∏è E-Commerce Store</h1>

    <h2>Products</h2>
    <div class="products" id="productList"></div>

    <h2>Your Cart</h2>
    <div class="cart" id="cartList">Cart is empty</div>
</div>

<!-- ============================== JS START ============================== -->
<script>

/* ===========================================================
   OOP CLASSES WITH INHERITANCE
=========================================================== */

class Product {
    constructor(id, name, price, image){
        this.id = id;
        this.name = name;
        this.price = price;
        this.image = image;
    }
}

class Electronic extends Product {
    constructor(id, name, price, image, warranty){
        super(id, name, price, image);
        this.warranty = warranty;
    }
}

class Clothing extends Product {
    constructor(id, name, price, image, size){
        super(id, name, price, image);
        this.size = size;
    }
}

/* CART ITEM CLASS */
class CartItem {
    constructor(product, quantity = 1){
        this.product = product;
        this.quantity = quantity;
    }
}

/* ===========================================================
   SAMPLE PRODUCT DATA
=========================================================== */

const products = [
    new Electronic(1, "Nokia Phone", 999, "https://www.vhv.rs/dpng/d/104-1040464_old-nokia-keypad-mobile-hd-png-download.png", "1 year"),
    new Electronic(2, "Airpods", 1999, "https://www.apple.com/newsroom/images/2025/09/introducing-airpods-pro-3-the-ultimate-audio-experience/article/Apple-AirPods-Pro-3-hero-250909_inline.jpg.large_2x.jpg", "6 months"),
    new Clothing(3, "sweat shirt", 999, "https://i5.walmartimages.com/asr/6b3ab1f4-9648-48bc-9298-1ac71f3a1edb.259a22e22dca9d51f955b630a852aaa1.jpeg", "L"),
    new Clothing(4, "Sneakers", 1999, "https://hips.hearstapps.com/hmg-prod/images/index-bomber-65a839208f31a.jpg?resize=2048:*", "Size 9")
];

/* ===========================================================
   LOCAL STORAGE HANDLING
=========================================================== */
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let theme = localStorage.getItem("theme") || "light";

if(theme === "dark") document.body.classList.add("dark");

function saveCart(){
    localStorage.setItem("cart", JSON.stringify(cart));
}

function saveTheme(){
    localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");
}

/* ===========================================================
   RENDER PRODUCTS
=========================================================== */
function renderProducts(){
    const container = document.getElementById("productList");
    container.innerHTML = "";

    products.forEach(p => {
        container.innerHTML += `
            <div class="card">
                <img src="${p.image}" alt="${p.name}">
                <h3>${p.name}</h3>
                <p>‚Çπ${p.price}</p>
                <button class="btn" onclick="addToCart(${p.id})">Add to Cart</button>
            </div>
        `;
    });
}

/* ===========================================================
   ADD / REMOVE CART ITEMS
=========================================================== */
function addToCart(id){
    let product = products.find(p => p.id === id);
    let item = cart.find(c => c.product.id === id);

    if(item){
        item.quantity++;
    } else {
        cart.push(new CartItem(product));
    }

    saveCart();
    renderCart();
}

function removeFromCart(id){
    cart = cart.filter(c => c.product.id !== id);
    saveCart();
    renderCart();
}

/* ===========================================================
   RENDER CART
=========================================================== */
function renderCart(){
    const container = document.getElementById("cartList");

    if(cart.length === 0){
        container.innerHTML = "Cart is empty";
        return;
    }

    container.innerHTML = "";

    cart.forEach(c => {
        container.innerHTML += `
            <div class="cart-item">
                <span>${c.product.name} (x${c.quantity}) - ‚Çπ${c.product.price * c.quantity}</span>
                <button class="btn" style="background:red;" onclick="removeFromCart(${c.product.id})">
                    Remove
                </button>
            </div>
        `;
    });
}

/* ===========================================================
   THEME TOGGLE
=========================================================== */

document.getElementById("themeToggle").onclick = () => {
    document.body.classList.toggle("dark");
    saveTheme();
};

/* ===========================================================
   INITIAL RENDER
=========================================================== */

renderProducts();
renderCart();

</script>
<!-- ============================== JS END ============================== -->

</body>
</html>
